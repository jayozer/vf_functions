{"functions":[{"id":"65e8d558993d1a459ef9c6f8","name":"checkopenhours","code":"export default async function main(args) {\n    const { currenttime, dayofweek } = args.inputVars;\n\n    // Validate input\n    if (!currenttime) {\n        return generateTraceResponse('Error: No currenttime was passed');\n    }\n    if (dayofweek === undefined) {\n        return generateTraceResponse('Error: No dayofweek was passed');\n    }\n\n    try {\n        const status = determineOpenStatus(currenttime, dayofweek);\n        return {\n            outputVars: {\n                status: status // 'Open' or 'Closed'\n            },\n        };\n    } catch (error) {\n        return generateTraceResponse(`Error: ${error.message}`);\n    }\n}\n\nfunction determineOpenStatus(currenttime, dayofweek) {\n    const timeRegex = /T(\\d{2}):(\\d{2})/;\n    const matches = currenttime.match(timeRegex);\n\n    if (matches && (dayofweek >= 1 && dayofweek <= 4)) {\n        const hour = parseInt(matches[1], 10);\n        const minute = parseInt(matches[2], 10);\n\n        // Determine if the time is within business hours AND if it's Monday to Thursday\n        if ((hour > 9 || (hour === 9 && minute >= 0)) && (hour < 17 || (hour === 17 && minute === 0))) {\n            return \"Open\";\n        }\n    }\n    return \"Closed\";\n}\n\nfunction generateTraceResponse(message) {\n    return {\n        outputVars: {\n            status: message\n        },\n        trace: [\n            {\n                type: 'debug',\n                payload: {\n                    message: message\n                }\n            }\n        ],\n    };\n\n}","image":null,"description":"Function that takes Currenttime as an input. This function will parse the time from Currenttime, compare it to your specified open hours (9:00 to 17:00), and return \"Open\" or \"Closed\" based on the comparison. ","createdAt":"2024-03-06T20:43:04.000Z","updatedAt":"2024-03-06T21:15:03.000Z","folderID":null,"updatedByID":129982,"createdByID":129982}],"functionPaths":[],"functionVariables":[{"id":"65e8d5ae993d1a459ef9c6f9","name":"currenttime","type":"input","description":"","createdAt":"2024-03-06T20:44:30.968Z","functionID":"65e8d558993d1a459ef9c6f8"},{"id":"65e8d947993d1a459ef9c72d","name":"{status}","type":"output","description":"","createdAt":"2024-03-06T20:59:51.748Z","functionID":"65e8d558993d1a459ef9c6f8"},{"id":"65e8dc3c993d1a459ef9c734","name":"dayofweek","type":"input","description":"","createdAt":"2024-03-06T21:12:28.275Z","functionID":"65e8d558993d1a459ef9c6f8"}]}